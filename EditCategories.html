<!DOCTYPE html>

<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Farmer's Market Application</title>
</head>
<body>
    <div style="text-align:center;">
        <p>Header</p>
        <hr>
        <h2>Add or Edit Categories</h2>
        <h3>Category List <br> <span style="font-size:.75em">Click on a item to edit it</h3>
        <p>
            <label>Category</label>
            <select id="editCategory">
                <option>New Category</option>
                <option>Category 1</option>
                <option>Category 2</option>
                <option>Category 3</option>
            </select>
        </p>
        <form>
            <p>
                <label>Name</label>
                <input id="name" type="text" />
            </p>
            <p>
                <input id="addCategory" type="button" value="Add Category" />
            </p>
            
        </form>
        <hr>
        <h2>Add or Edit Sub-Categories</h2>
        <form>
            <p>
                <label>Category</label>
                <select id="searchCategory">
                    <option>Select</option>
                    <option>Category 1</option>
                    <option>Category 2</option>
                    <option>Category 3</option>
                </select>
            </p>
            <p>
                <label>Sub-Category</label>
                <select id="searchSubcategory" disabled>
                    <option>Select Category</option>
                </select>
            </p>
            <p>
                <label>Name</label>
                <input id="subname" type="text" />
            </p>
            <p>
                <input id="addSubcategory" type="button" value="Add Sub-Category" />
            </p>
            
        </form>
        <hr>
        <p>Footer</p>
		<script>

            $("#editCategory").on("change", function(){
                if ($(this).val() == "New Category"){
                    $("#name").val("");
                    $("#addCategory").val("Add Category");
                }
                else {
                    $("#name").val($(this).val())
                    $("#addCategory").val("Edit Category");
                }
            });

            $("#searchCategory").on("change", function(){
                changeSubcategories($(this), $("#searchSubcategory"));
                $("#subname").val("");
                $("#addSubcategory").val("Add Category");
            });

            $("#searchSubcategory").on("change", function(){
                var $selected = $("#searchSubcategory option:selected");
                if ($selected.text() == "New Sub-Category"){
                    $("#subname").val("");
                    $("#addSubcategory").val("Add Category");
                }
                else {
                    $("#subname").val($selected.text())
                    $("#addSubcategory").val("Edit Category");
                }
            });

            function changeSubcategories($category, $subcategories) {
                if ($category.val() != "Select"){
                    $subcategories.prop("disabled", false);
                    $subcategories.find("option").remove().end();
                    if ($category.val() == "Category 1"){
                        $subcategories.append($('<option>', {value: "0", text: "New Sub-Category"}));
                        $subcategories.append($('<option>', {value: "1", text: "Sub-Category 1"}));
                        $subcategories.append($('<option>', {value: "2", text: "Sub-Category 2"}));
                    }
                    else if ($category.val() == "Category 2"){
                        $subcategories.append($('<option>', {value: "0", text: "New Sub-Category"}));
                        $subcategories.append($('<option>', {value: "3", text: "Sub-Category 3"}));
                        $subcategories.append($('<option>', {value: "4", text: "Sub-Category 4"}));
                    }
                    else {
                        $subcategories.append($('<option>', {value: "0", text: "New Sub-Category"}));
                    }

                }
                else{
                    $subcategories.prop("disabled", true);
                    $subcategories.find("option").remove().end();
                    $subcategories.append($('<option>', {value: "0", text: "Select a Category"}));
                }
            }

			function OnUserClickAddCategory()
			{
				let categoryName = document.getElementById("CategoryName");
				let categoryType = document.getElementById("Type");
				addCategory(categoryName.textContent, categoryType.textContent, null);

			}
		</script>

        <style type="text/css">
            .item-list{list-style-position: inside;}
            .item{cursor: pointer; color: blue; text-decoration: underline;}
            .item:hover{color: darkblue;}
        </style>
    </div>
</body>
</html>